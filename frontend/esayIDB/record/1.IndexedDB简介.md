## IndexedDB
作用：IndexedDB是一种底层API,用于在客户端（本地磁盘）存储**大量的结构化数据(也包括文件/二进制大型对象（blobs）)**。

特性：
1. IndexedDB 使用索引实现对数据的高性能搜索。
2. 键值对存储：IndexedDB 内部采用对象仓库（object store）存放数据。所有类型的数据都可以直接存入，包括 JavaScript 对象。对象仓库中，数据以"键值对"的形式保存，每一个数据记录都有对应的主键，主键是独一无二的，不能有重复，否则会抛出一个错误。
3. IndexedDB 是一个事务型数据库系统(注一)。 
4. IndexedDB 也遵循同源策略。 
5. IndexedDB 也是有容量限制的。参考：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API#%E5%82%A8%E5%AD%98%E9%99%90%E5%88%B6%E5%92%8C%E5%9B%9E%E6%94%B6%E6%A0%87%E5%87%86">储存限制和回收标准</a>
6. IndexedDB 是非关系型数据库（不支持SQL查询语句）
7. 支持二进制存储：不仅能存储字符串，还可以存储二进制数据（ArrayBuffer 对象和Blob对象）。
8. 使用 IndexedDB 执行的操作是异步执行的，以免阻塞应用程序。

> 注一：事务（Transaction）：指一个操作，由多个步骤组成，要么全部成功，一步失败则全部失败。失败后整个事务就都取消，数据库回滚到事务发生之前的状态，不存在只改写一部分数据的情况。

### 基本概念：

IndexedDB 将不同的实体，抽象成了一个个对象接口。

+ 数据库：IDBDatabase 对象
+ 对象仓库：IDBObjectStore 对象
+ 索引：IDBIndex 对象
+ 事务：IDBTransaction 对象
+ 操作请求：IDBRequest 对象
+ 指针：IDBCursor 对象
+ 主键集合：IDBKeyRange 对象

#### 1. 数据库

数据库是一系列相关数据的容器。每个域名（协议，域名，端口）都可以建任意多个数据库。

IndexedDB 数据库有版本的概念。同一时刻，只能有一个版本的数据库存在。如果要修改数据库结构(新增或删除表、索引或者主键)，只能通过升级数据库版本完成。

### 2. 对象仓库

相当于关系型数据库的**表**。

### 3. 数据记录

**对象仓库**存储的是数据记录。每条记录类似于关系型数据库的行，但只有主键和数据体两部分。

主键用来建立默认的索引，必须是不同的，否则会报错。

主键可以是数据记录里面的一个属性，也可以指定为一个递增的整数编号。

`{ id: 1, text: 'foo' }` 如此对象中 id 可以当做主键。

数据体可以是任意数据类型，不限于对象。

### 4. 索引

为了加快数据的检索，可以在对象仓库里面，为不同的属性建立索引。

### 5. 事务

数据记录的读写和删除，都要通过事务完成。事务对象提供`error`,`abort`和`complete`三个事件，用来监听操作结果。
